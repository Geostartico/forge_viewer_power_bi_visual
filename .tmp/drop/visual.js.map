{"version":3,"file":"visual.js","mappings":"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;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,YAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,YAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,MAAgC;AACnD,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,MAAgC;AACjD,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kDAAkD,OAAO;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,kDAAkD,OAAO;AACzD;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAE8F;;;;;;;UCnO9F;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;ACN0C;AAK1C,IAAI,UAAU,GAAQ,SAAS,CAAC;AAChC,IAAI,OAAO,GAAQ,MAAM,CAAC,UAAU,CAAC,CAAC;AACtC,IAAI,mDAAmD,GAAkB;IACrE,IAAI,EAAE,qDAAqD;IAC3D,WAAW,EAAE,iBAAiB;IAC9B,KAAK,EAAE,QAAQ;IACf,UAAU,EAAE,OAAO;IACnB,MAAM,EAAE,CAAC,OAAiC,EAAE,EAAE;QAC1C,IAAI,wDAAM,EAAE;YACR,OAAO,IAAI,wDAAM,CAAC,OAAO,CAAC,CAAC;SAC9B;QACD,MAAM,2BAA2B,CAAC;IACtC,CAAC;IACD,iBAAiB,EAAE,CAAC,QAAgB,EAAE,OAAiC,EAAE,YAAoB,EAAE,EAAE;QAC7F,MAAM,cAAc,GAAG,UAAU,CAAC,cAAc,CAAC;QACjD,IAAI,QAAQ,IAAI,cAAc,EAAE;YAC5B,IAAI,cAAc,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;SACvD;IACL,CAAC;IACD,MAAM,EAAE,IAAI;CACf,CAAC;AACF,IAAI,OAAO,OAAO,KAAK,WAAW,EAAE;IAChC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,EAAE,CAAC;IACxC,OAAO,CAAC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,IAAI,EAAE,CAAC;IACxD,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,qDAAqD,CAAC,GAAG,mDAAmD,CAAC;CACxI;AACD,iEAAe,mDAAmD,EAAC","sources":["webpack:///./src/Isolator.ts","webpack:///./src/Selection_manager_extension.ts","webpack:///./src/attribute_parser.ts","webpack:///./src/isolateFunction.ts","webpack:///./src/panel_extension.ts","webpack:///./src/visual.ts","webpack:///external var \"Function('return this')()\"","webpack:///./node_modules/async-mutex/index.mjs","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./.tmp/precompile/visualPlugin.ts"],"sourcesContent":["import {struct} from './attribute_parser'\r\nimport {isolateFunction} from './isolateFunction'\r\nimport {Mutex} from 'async-mutex';\r\n//class to isolate, color, zoom and hide elements\r\nexport class Isolator{\r\n    curDbids : Set<number>;\r\n    dbidToColor : Map<number, number[][]>;\r\n    numOfNames : number;\r\n    curDone : number;\r\n    viewer : any;//the types have the wrong number of parameters for some functions, so i have to use any\r\n    searchParam : {names : struct[], vals : string[]};\r\n    isolate : boolean;\r\n    zoom : boolean;\r\n    paint : boolean;\r\n    hide : boolean;\r\n    mutexOnfunction : Mutex = new Mutex();\r\n    mutexOnParameters : Mutex = new Mutex();\r\n    \r\n    constructor(aviewer : Autodesk.Viewing.Viewer3D){\r\n        this.viewer = aviewer;\r\n    }\r\n\r\n    //clears all modifications\r\n    public clear() : void{\r\n        this.viewer.impl.visibilityManager.setNodeOff(this.viewer.model.getRootId(), false);\r\n        this.viewer.isolate();\r\n        this.viewer.clearThemingColors(this.viewer.model);\r\n        this.viewer.fitToView();\r\n    }\r\n\r\n    //elements where the avalues[i] is contained in the property fields anames.names[i].names, according to the color anames.names[i].color\r\n    public async searchAndIsolate(anames : struct[], avalues : string[], isolate : boolean, zoom : boolean, paint : boolean, hide : boolean) : Promise<void>{\r\n        await this.mutexOnfunction.acquire();\r\n        this.clear();\r\n        if(anames.length === 0){\r\n            return;\r\n        }\r\n        if(anames.length != avalues.length){\r\n            throw new Error('the values and structs must be the same number');\r\n        }\r\n        this.isolate = isolate;\r\n        this.zoom = zoom;\r\n        this.paint = paint;\r\n        this.hide = hide;\r\n        this.curDbids = new Set<number>();\r\n        this.dbidToColor = new Map<number, number[][]>();\r\n        this.numOfNames = anames.length;\r\n        this.curDone = 0;\r\n        this.searchParam = {names : anames, vals : avalues}\r\n        for(let i = 0; i < this.searchParam.vals.length; i ++){\r\n            this.viewer.search('\"' + this.searchParam.vals[i] + '\"', this.succcallback.bind(this), this.errCallback, this.searchParam.names[i].names, {searchHidden: true, includeInherited: true});\r\n        }\r\n\r\n    }\r\n\r\n    //accidentally implemented this function misunderstanding a feature\r\n    //it colors based on the value of a property\r\n    public searchAndColorByValue(field : string, keyword: string, valueField : string, valueToColor : Map<string, number[]>, clearPrev : boolean = true){\r\n        this.curDbids = new Set<number>();\r\n        if(clearPrev){\r\n            this.clear();\r\n        }\r\n        let succcallback2 = (dbids : number[]) => {\r\n            for(let i of dbids){\r\n                this.curDbids.add(i);\r\n            }\r\n            let valueFieldUpper = valueField.toUpperCase();\r\n            for(let db of this.curDbids.values()){\r\n                this.viewer.getProperties(db, (prop) => {\r\n                    for(let erty of prop.properties){\r\n                        if(erty.displayName.toUpperCase() == valueFieldUpper){\r\n                            if(valueToColor.has(erty.displayValue.toString())){\r\n                                //console.log(valueToColor.get(erty.displayValue.toString()));\r\n                                let cl = valueToColor.get(erty.displayValue.toString()).map((e) => {return e/256});\r\n                                this.viewer.setThemingColor(db, new THREE.Vector4(cl[0], cl[1], cl[2], cl[3]), this.viewer.model, true);\r\n                            }\r\n                        }\r\n                    }\r\n                }, \r\n                this.errCallback)\r\n            }\r\n            isolateFunction(dbids, this.viewer.model.getInstanceTree(), this.viewer, this.hide)\r\n        }\r\n        this.viewer.search('\"' + keyword + '\"', succcallback2.bind(this), this.errCallback, [field], {searchHidden: true, includeInherited: true});\r\n    } \r\n\r\n    private async succcallback(dbids : number[]){\r\n        //insert new dbids and associate them with the correct color\r\n        await this.mutexOnParameters.acquire();\r\n        for(let i of  dbids){\r\n            this.curDbids.add(i);\r\n            if(!this.dbidToColor.has(i)){\r\n                this.dbidToColor.set(i, [this.searchParam.names[this.curDone].color]);\r\n            }\r\n            else{\r\n                //the same dbid could satisfy more than one condition\r\n                this.dbidToColor.set(i, this.dbidToColor.get(i).concat([this.searchParam.names[this.curDone].color]));\r\n            }\r\n        }\r\n        this.curDone++;\r\n        //it's the last iteration, isolate and paint\r\n        if(this.curDone === this.numOfNames){\r\n            console.log(\"FATTO\");\r\n            this.clear();\r\n            let tree = this.viewer.model.getInstanceTree();\r\n            //isolate\r\n            if(this.isolate){\r\n                isolateFunction(Array.from(this.curDbids.values()), tree, this.viewer, this.hide);\r\n            }\r\n            //paint\r\n            if(this.paint){\r\n                this.dbidToColor.forEach((colors : number[][], num : number) => {\r\n                        //averages the colors that should color the object\r\n                        let avgcolor : number [] = this.average(colors, 256);\r\n                        let threeAvgColor = new THREE.Vector4(avgcolor[0], avgcolor[1], avgcolor[2], avgcolor[3]);\r\n                        this.viewer.setThemingColor(num, threeAvgColor, this.viewer.model, true) \r\n                })\r\n            }\r\n            if(this.zoom){\r\n                this.viewer.fitToView(Array.from(this.curDbids.values()));\r\n            }\r\n            this.mutexOnfunction.release();\r\n        }\r\n        this.mutexOnParameters.release()\r\n    }\r\n\r\n    private errCallback(err){\r\n        console.log('an error has occured during search', err)\r\n    }\r\n\r\n    //the length of every array must be the same\r\n    private average(arrs : number[][], normalization : number = 1) : number[]{\r\n        let ret : number[] = [];\r\n        for(let i = 0; i < arrs[0].length; i ++){\r\n            let sum : number = 0;\r\n            for(let ii = 0; ii < arrs.length; ii++){\r\n                sum += arrs[ii][i];\r\n            }\r\n            sum /= arrs.length;\r\n            sum /= normalization;\r\n            ret.push(sum);\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n","import powerbi from \"powerbi-visuals-api\";\r\nimport { Semaphore } from \"async-mutex\";\r\n\r\nexport function selectionManagerExtension(){\r\n    class ext extends Autodesk.Viewing.Extension{\r\n        onClickCallBack : Function;\r\n        selectionManager : powerbi.extensibility.ISelectionManager;\r\n        host : powerbi.extensibility.visual.IVisualHost;\r\n        idToSelector : Map<string, powerbi.extensibility.ISelectionId> = new Map<string, powerbi.extensibility.ISelectionId>();\r\n        propertyName : string;\r\n\r\n        constructor(viewer, options){\r\n            super(viewer, options);\r\n        }\r\n\r\n        public load(): boolean | Promise<boolean> {\r\n            this.viewer.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, (this.selectionCallback).bind(this));\r\n            console.log('selectionManagerExtension loaded');\r\n            return true\r\n        }\r\n        public setSelectionHost(host : powerbi.extensibility.visual.IVisualHost){\r\n            this.host = host;\r\n        }\r\n        public setSelectionManager(selMan : powerbi.extensibility.ISelectionManager){\r\n            this.selectionManager = selMan;\r\n        }\r\n\r\n\r\n        public setSelectables(cat : powerbi.DataViewCategoryColumn){\r\n        if(!this.host){\r\n            return;\r\n        }\r\n            for(let i = 0; i < cat.values.length; i++){\r\n                this.idToSelector.set(cat.values[i].toString(), this.host.createSelectionIdBuilder().withCategory(cat, i).createSelectionId());\r\n            }\r\n        }\r\n        public setPropertyName(name : string){\r\n            if(name){\r\n                this.propertyName = name;\r\n            }\r\n        }\r\n        public setOnNonVoidSelectionCallback(fn : Function){\r\n            this.onClickCallBack = fn;\r\n        }\r\n\r\n        private async selectionCallback(event){\r\n            console.log(\"Selection on the viewer was made\");\r\n            \r\n            let dbIds : number[]= event.dbIdArray;\r\n            if(dbIds.length === 0){\r\n                this.selectionManager.clear();\r\n                return;\r\n            }\r\n            let toSelect : powerbi.extensibility.ISelectionId[] = [];\r\n            let sem : Semaphore;\r\n            if(this.host && this.selectionManager){\r\n                sem = new Semaphore(dbIds.length);\r\n                for(let dbid of dbIds){\r\n                    await sem.acquire();\r\n                    await this.viewer.getProperties(dbid, ((pr) => {\r\n                        console.log(\"gettingProperties\");\r\n                        for(let prop of pr.properties){\r\n                            if(prop.displayName === this.propertyName){\r\n                                console.log(\"property found\");\r\n                                if(this.idToSelector.has(prop.displayValue.toString())){\r\n                                    toSelect.push(this.idToSelector.get(prop.displayValue.toString()));\r\n                                }\r\n                            }\r\n                        }\r\n                        sem.release();\r\n                    }).bind(this))\r\n                }\r\n            }\r\n            if(sem){\r\n                await sem.acquire(dbIds.length);\r\n            }\r\n            console.log(toSelect);\r\n            if(this.onClickCallBack){\r\n                this.onClickCallBack()\r\n            }\r\n            this.selectionManager.clear();\r\n            this.selectionManager.select(toSelect, true);\r\n        }\r\n\r\n    }\r\n    return ext;\r\n}\r\n","/**\r\n * name format: [name1, name2, name3] (number, number, number, number); ... (the number must be between 0 and 256)\r\n * value format: val1, val2, val3 ...\r\n * **/\r\nexport class struct{\r\n    public names : string[];\r\n    public color : number[];\r\n    constructor(str : string[], nm : number[]){\r\n        this.names = str;\r\n        this.color = nm;\r\n    }\r\n}\r\n\r\n//used by the panel extension to parse the given parameters\r\nexport function attributeParser(attributeVals : string, attributeNames : string) : {names : struct[], vals : string[]}{\r\n    let dividedvals : string[] = parseVals(attributeVals);\r\n    let divideNames : struct[] = parseNames(attributeNames);\r\n    return {names : divideNames, vals : dividedvals};\r\n}\r\n\r\nfunction parseVals(values : string) : string[]{\r\n    return values.split(',').map<string>((str) => {return str.trim()})\r\n}\r\n\r\nfunction parseNames(names : string) : struct[]{\r\n    let curStart : number;\r\n    let curEnd : number;\r\n    let curNames : string[];\r\n    let curColor : number[];\r\n    let ret : struct[] = [];\r\n    for(let i = 0; i < names.length; i ++){\r\n        //list of names to search in\r\n        if(names.charAt(i) === '['){\r\n            curStart = i;\r\n            while(i < names.length && names.charAt(i) != ']'){\r\n                i++;\r\n            }\r\n            curNames = divideNames(names.slice(curStart + 1, i));\r\n        }\r\n        //color to associate\r\n        if(names.charAt(i) === '('){\r\n            curStart = i;\r\n            while(i < names.length && names.charAt(i) != ')'){\r\n                i++;\r\n            }\r\n            curColor = parseColor(names.slice(curStart + 1, i));\r\n        }\r\n        //end of couple\r\n        if(names.charAt(i) === ';'){\r\n            if(curNames === undefined || curColor === undefined){\r\n                throw new Error(\"for every list of names there must be a color and vice versa\");\r\n            }\r\n            ret.push(new struct(curNames, curColor));\r\n            curNames = undefined;\r\n            curColor = undefined;\r\n        }\r\n    }\r\n    if(curNames != undefined || curColor != undefined){\r\n        throw new Error(\"please end every couple name,string with a semicolon\");\r\n    }\r\n    return ret;\r\n}\r\n\r\nfunction divideNames(str : string) : string[]{\r\n    return str.split(',').map((st) => {return st.trim()})\r\n}\r\n\r\nfunction parseColor(str : string) : number[]{\r\n    return str.split(',').map((st) => {\r\n        let nm = Number(st);\r\n        if(nm > 256 || nm < 0){\r\n            throw new Error(\"RGB colors values must be in [0, 256]\");\r\n        }\r\n        return Number(st)});\r\n}\r\n","//used to isolate the elements identified by the id\r\nexport function isolateFunction(dbIds : number[], tree : any/*instance tree*/, viewer, hide : boolean){\r\n    console.log(\"dbIds: \", dbIds);\r\n    let leafIDs = getLeaves(dbIds, tree); \r\n    let allIds = getLeaves([tree.getRootId()], tree)\r\n    let unwanted = allIds.filter((id) => {return leafIDs.indexOf(id) < 0});\r\n    console.log(\"unwanted: \", unwanted);\r\n    console.log('leaves', leafIDs);\r\n    viewer.isolate(leafIDs);\r\n    if(hide){\r\n        for(let i of unwanted){\r\n            viewer.impl.visibilityManager.setNodeOff(i, true);\r\n        }\r\n    }\r\n}\r\nfunction getLeaves(dbIds : number[], tree){\r\n    let leaves : number[] = [];\r\n    for(let i = 0; i < dbIds.length; i++){\r\n        let subchildren = (id) =>{\r\n            if(tree.getChildCount(id) === 0){\r\n                leaves.push(id)\r\n            }\r\n            tree.enumNodeChildren(id, (child) => {subchildren(child)});\r\n        }\r\n        subchildren(dbIds[i]);\r\n    }\r\n    return leaves;\r\n}\r\n","import {attributeParser, struct} from './attribute_parser';\r\nimport {isolateFunction} from './isolateFunction';\r\nimport {Isolator} from './Isolator';\r\n/**\r\n * the class extends Autodesk.Viewing.UI.DockingPanel, if it is imported in another file the class is evaluated, unfortunately\r\n * the code for autodesk is imported in runtime, therefore before the import Autodesk is undefined, making the code stop when\r\n * Autodesk.Viewing is evaluated. the smarter solution would be to dynamically import the class, but it returns a syntax error\r\n * in the code for which i don't have an exact explanation\r\n * **/\r\nexport function PanelExtension(){\r\n    //actual panel to insert the query\r\n    class Panel extends Autodesk.Viewing.UI.DockingPanel{\r\n        attrName: string;\r\n        attrValue: string;\r\n        attributeNameInput : HTMLInputElement;\r\n        attributeValueInput : HTMLInputElement;\r\n        submitButton : HTMLInputElement;\r\n        clearButton : HTMLInputElement;\r\n        fileInput : HTMLInputElement;\r\n        div : HTMLDivElement;\r\n        form;\r\n        curDbids : Set<number>;\r\n        dbidToColor : Map<number, number[][]>;\r\n        numOfNames : number;\r\n        curDone : number;\r\n        searchParam : {names : struct[], vals: string[]};\r\n        isol : Isolator;\r\n        viewer : any;//can't type it, issues with some methods signatures which miss parameters in the typescript version\r\n        titleBar : any;\r\n        closeButton : any;\r\n\r\n        constructor(viewer, container, id, title, options = {}) {\r\n            super(container, id, title, options);\r\n            this.viewer = viewer;\r\n            this.isol = new Isolator(this.viewer);\r\n        }\r\n\r\n        initialize() {\r\n            this.container.style.top = \"10px\";\r\n            this.container.style.left = \"10px\";\r\n            this.container.style.width = \"auto\";\r\n            this.container.style.height = \"auto\";\r\n            this.container.style.resize = \"auto\";\r\n\r\n            // title bar\r\n            this.titleBar = this.createTitleBar(this.titleLabel || this.container.id);\r\n            this.container.appendChild(this.titleBar);\r\n\r\n            // close button\r\n            this.closeButton = this.createCloseButton();\r\n            this.container.appendChild(this.closeButton);\r\n\r\n            // allow move\r\n            this.initializeMoveHandlers(this.titleBar);\r\n\r\n            // the main content area\r\n            this.container.appendChild(this.createScrollContainer({}));\r\n\r\n            // footer\r\n            this.container.appendChild(this.createFooter());\r\n            //create div to contain the menu, containing a form with two fields: attributename and attributevalue and a button to commit\r\n            this.div = document.createElement('div');\r\n            this.form = document.createElement('form');\r\n\r\n            let txt = document.createElement(\"span\");\r\n            txt.innerText = \"Attribute Name to search\";\r\n\r\n            //text input for attributeName\r\n            this.attributeNameInput = document.createElement('input');\r\n            this.attributeNameInput.type = 'text';\r\n            this.attributeNameInput.id = 'attributeNameInput';\r\n            this.attributeNameInput.name = 'attribute Name';\r\n            this.attributeNameInput.addEventListener('input', this.updateAttributeName.bind(this))\r\n\r\n            let txt2 = document.createElement('span');\r\n            txt2.innerText = 'Attribute value to search';\r\n\r\n            //text input for attributeValue\r\n            this.attributeValueInput = document.createElement('input');\r\n            this.attributeValueInput.type = 'text';\r\n            this.attributeValueInput.id = 'attributeValueInput';\r\n            this.attributeValueInput.name = 'attribute value';\r\n            this.attributeValueInput.addEventListener('input', this.updateAttributeValue.bind(this)) \r\n            \r\n            //submit Button\r\n            this.submitButton = document.createElement('input');\r\n            this.submitButton.type = 'submit';\r\n            this.submitButton.value = 'start query';\r\n            this.submitButton.addEventListener('click', this.onClickSubmit.bind(this))\r\n\r\n            //clear button\r\n            this.clearButton = document.createElement('input');\r\n            this.clearButton.type = 'submit';\r\n            this.clearButton.value = 'clear selections';\r\n            this.clearButton.addEventListener('click', this.clear.bind(this))\r\n\r\n            //file input\r\n            this.fileInput = document.createElement('input');\r\n            this.fileInput.type = 'file';\r\n            this.fileInput.id = 'fileinput';\r\n            this.fileInput.name = 'upload file';\r\n            this.fileInput.accept = 'csv';\r\n\r\n            //attach elements to form\r\n            this.form.appendChild(txt);\r\n            this.form.appendChild(this.attributeNameInput);\r\n            this.form.appendChild(document.createElement('br'));\r\n            this.form.appendChild(txt2);\r\n            this.form.appendChild(this.attributeValueInput);\r\n            this.form.appendChild(document.createElement('br'));\r\n            this.form.appendChild(this.submitButton);\r\n            this.form.appendChild(document.createElement('br'));\r\n            this.form.appendChild(this.clearButton);\r\n            this.form.appendChild(this.fileInput);\r\n\r\n            this.div.appendChild(this.form);\r\n            this.scrollContainer.appendChild(this.div);\r\n        }\r\n\r\n        private updateAttributeName(event : Event){\r\n            this.attrName = (event.target as HTMLInputElement).value;\r\n            console.log(\"attribute name: \", this.attrName);\r\n        }\r\n\r\n        private updateAttributeValue(event : Event){\r\n            this.attrValue = (event.target as HTMLInputElement).value;\r\n            console.log(\"attribute value: \", this.attrValue);\r\n        }\r\n\r\n        //performs query when the form is submitted\r\n        private onClickSubmit(event : Event){\r\n            this.clear();\r\n            this.searchParam = attributeParser(this.attrValue,this.attrName);\r\n\r\n            if(this.searchParam.names.length != this.searchParam.vals.length){\r\n                console.log(this.searchParam);\r\n                throw new Error(\"You must have the same number of name lists and keywords\");\r\n            }\r\n            \r\n            this.curDone = 0;\r\n            this.numOfNames = this.searchParam.vals.length;\r\n            this.dbidToColor = new Map<number, number[][]>();\r\n            this.curDbids = new Set<number>();\r\n            this.isol.searchAndIsolate(this.searchParam.names, this.searchParam.vals, true, true, true, true);\r\n        }\r\n        //restores model visibility to default\r\n        private clear(event : Event = null){\r\n            console.log(\"clearing\");\r\n            this.isol.clear();\r\n        }\r\n        \r\n    }\r\n\r\n    //extension of the viewer to implement the panel\r\n    class PanelExt extends Autodesk.Viewing.Extension{\r\n\r\n        pn : Panel;\r\n        btn : Autodesk.Viewing.UI.Button;\r\n        subToolbar : Autodesk.Viewing.UI.ToolBar;\r\n\r\n        constructor(viewer, options){\r\n            super(viewer, options);\r\n        }\r\n\r\n\r\n        public load() : boolean{\r\n            console.log(\"loading DockingPanel\");\r\n            return true;\r\n        } \r\n\r\n        public unload() : boolean{\r\n            console.log(\"unload DockingPanel\")\r\n            return true;\r\n        }\r\n\r\n        //initializes ui elements \r\n        public onToolbarCreated(toolbar : Autodesk.Viewing.UI.ToolBar){\r\n            var viewer = this.viewer;\r\n\r\n\r\n            // Button 1\r\n            this.btn = new Autodesk.Viewing.UI.Button('show-env-bg-button');\r\n            this.btn.onClick = ((e) => {\r\n                this.pn = new Panel(this.viewer, this.viewer.container, 'searchPanel', 'search');\r\n                this.pn.setVisible(true);\r\n            }).bind(this);\r\n            this.btn.addClass('open-panel-button');\r\n            this.btn.setToolTip('open search panel');\r\n\r\n            \r\n            // SubToolbar\r\n            this.subToolbar = new Autodesk.Viewing.UI.ControlGroup('my-custom-toolbar');\r\n            this.subToolbar.addControl(this.btn);\r\n\r\n            toolbar.addControl(this.subToolbar);\r\n            };\r\n    } \r\n    return PanelExt\r\n}\r\n","\"use strict\"\r\n\r\nimport powerbi from \"powerbi-visuals-api\";\r\nimport \"./../style/visual.less\";\r\n\r\nimport VisualConstructorOptions = powerbi.extensibility.visual.VisualConstructorOptions;\r\nimport VisualUpdateOptions = powerbi.extensibility.visual.VisualUpdateOptions;\r\nimport IVisual = powerbi.extensibility.visual.IVisual;\r\n//import {ExtensionGetter} from \"./ExtensionGetter\";\r\nimport {PanelExtension} from \"./panel_extension\";\r\nimport {Isolator} from \"./Isolator\";\r\nimport {struct} from \"./attribute_parser\";\r\nimport {selectionManagerExtension} from './Selection_manager_extension'\r\n//import {visualConnectorExtension} from './VisualConnector_extension';\r\nlet htmlText : string = 'no rendering?';\r\nlet viewId : string = 'forge-viewer';\r\nlet extensionid : string = 'connector_extension';\r\n//strings used to identify the columns(the user can rename them to match these)\r\nlet color_value = \"value_color\";\r\nlet value_ref = \"value_ref\";\r\nlet color_ref = \"color_ref\";\r\nlet R = \"R\";\r\nlet G = \"G\";\r\nlet B = \"B\";\r\nlet I = \"I\";\r\nlet value_column = \"value\";\r\nexport class Visual implements IVisual {\r\n    private target: HTMLElement;\r\n    private pbioptions: VisualConstructorOptions;\r\n    private selectionMan : powerbi.extensibility.ISelectionManager;\r\n    private host : powerbi.extensibility.visual.IVisualHost;\r\n    private selection_extension;\r\n    private suppress_render_cycle : boolean\r\n    private forgeviewer : Autodesk.Viewing.GuiViewer3D;\r\n    private client_id : string | undefined;\r\n    private client_secret : string | undefined;\r\n    private accessToken : string | undefined;\r\n    //urn of the model to be shown\r\n    private urn : string | undefined;\r\n    //object used to isalate, color, zoom on objects\r\n    private isolator : Isolator;\r\n    //options of the selection\r\n    private zoom : boolean = true;\r\n    private color : boolean = true;\r\n    private isolate : boolean = true;\r\n    private hidden : boolean = true\r\n    //the column name in the table where it is selected, must match the name of the actual model property\r\n    private id_column : string = '';\r\n    //color to RGBI representation\r\n    private colorDict : Map<string, number[]> = new Map<string, number[]>();\r\n    //value of the column to the name of the color\r\n    private value_to_color : Map<string, string> = new Map<string, string>();\r\n    private pulledCode = false;\r\n\r\n    constructor(options: VisualConstructorOptions) {\r\n        console.log('Visual constructor', options);\r\n        this.pbioptions = options;\r\n        this.target = options.element;\r\n        this.target.innerText = htmlText;\r\n        console.log(this.target); \r\n        this.selectionMan = options.host.createSelectionManager();\r\n        this.host = options.host;\r\n        this.onLoadSuccess = this.onLoadSuccess.bind(this);\r\n    }\r\n    //method used to authenticate from syncronous functions\r\n    private async syncauth(succcallback : Function){\r\n        //fetching the access token\r\n        let fetched = await fetch(\r\n            \"https://developer.api.autodesk.com/authentication/v1/authenticate\",\r\n            {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n            },\r\n            body: new URLSearchParams({\r\n                'client_id': this.client_id,\r\n                'client_secret': this.client_secret,\r\n                'grant_type': 'client_credentials',\r\n                'scope': 'viewables:read'\r\n                })\r\n            }\r\n        )\r\n        let jason = await fetched.json();\r\n        this.accessToken = jason.access_token;\r\n        //calls the callback given in case of success\r\n        succcallback();\r\n    }\r\n\r\n    //called by power BI when something is changed in the report\r\n    public update(options: VisualUpdateOptions) {\r\n        if(!this.selection_extension){\r\n            this.myGetExtension();\r\n        }\r\n        //where the tables given by the user are passed\r\n        let cat = options.dataViews[0].categorical;\r\n        console.log(cat);\r\n        //saves the credentials before they are updated\r\n        let curcred : string[] = [this.client_id, this.client_secret, this.urn];\r\n        //changing parameters\r\n        this.updateParameters(cat);\r\n        if(this.selection_extension){\r\n            this.selection_extension.setPropertyName(this.id_column);\r\n            this.selection_extension.setSelectionHost(this.host);\r\n            this.selection_extension.setOnNonVoidSelectionCallback((() => {this.suppress_render_cycle = true}).bind(this));\r\n            this.selection_extension.setSelectionManager(this.selectionMan);\r\n        }\r\n        console.log(\"credentials\", [this.urn, this.client_id, this.client_secret]);\r\n        //at some point the credentials where set\r\n        if(this.client_id != undefined && this.client_secret != undefined && this.urn != undefined){\r\n            //the forge viewer was invalidated(wrong credentials) or it was never initialized\r\n            if(this.forgeviewer === undefined){\r\n                //when the authentication is finished the viewer is initialized\r\n                let cl = () => {this.initializeViewer(viewId, cat)}; \r\n                this.syncauth(cl);\r\n            }\r\n            else{\r\n                console.info(\"updating\");\r\n                //coloring based on the selection\r\n                console.log(this.suppress_render_cycle);\r\n                if(!this.suppress_render_cycle){\r\n                    this.isolateBySelection(cat);\r\n                }\r\n                else{\r\n                    this.suppress_render_cycle = false\r\n                }\r\n                //credentials changed\r\n                if(this.client_id != curcred[0] || this.client_secret != curcred[1]){\r\n                   console.info(\"changing account\");\r\n                   this.syncauth(() => {\r\n                       this.forgeviewer.finish();\r\n                       this.forgeviewer = undefined;\r\n                       this.initializeViewer(viewId, cat);\r\n                   });\r\n               }\r\n               //model changed\r\n               else if(this.urn != curcred[2]){\r\n                   Autodesk.Viewing.Document.load('urn:' + this.urn, (async (doc) => {await this.onLoadSuccess; this.isolateBySelection(cat)}).bind(this), this.onLoadFailure)\r\n               }\r\n            }\r\n        }\r\n    }\r\n\r\n    public async initializeViewer(viewerDiv : string, cat : powerbi.DataViewCategorical) : Promise<void>{\r\n        let aT = this.accessToken;\r\n        //options for the viewer initialization\r\n        let options = {\r\n        env: 'AutodeskProduction',\r\n        api: 'derivativeV2', \r\n        getAccessToken: (onTokenReady : any) =>{ \r\n            let timeInSeconds = 3599; \r\n            onTokenReady(aT, timeInSeconds); \r\n            }\r\n        }\r\n        //gets the needed code and the css to initialize the viewer\r\n        if(!this.pulledCode){\r\n            await this.getForgeviewerStyleAndSrc();\r\n            this.pulledCode = true;\r\n        }\r\n        //function used to initialize viewer\r\n        Autodesk.Viewing.Initializer(options, () =>{\r\n                console.log(\"getting started\");\r\n                //specifies extensions to load in the viewer\r\n                let config = {extensions: \r\n                    [\r\n                    'Autodesk.ViewCubeUi',\r\n                    'panel_extension',\r\n                    'selection_manager_extension'\r\n                    ]\r\n                };\r\n                this.forgeviewer = new Autodesk.Viewing.GuiViewer3D(document.getElementById(viewerDiv), config);\r\n                console.log(this.forgeviewer.start());\r\n                this.isolator = new Isolator(this.forgeviewer);\r\n                //this.forgeviewer.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, ((e) => {this.forgeviewer.getProperties(e.dbIdArray[0], (k) => {console.log(k);})}).bind(this));\r\n                //extension to hide viewCube\r\n                this.myloadExtension('Autodesk.ViewCubeUi', (res) => {res.setVisible(false);});\r\n                Autodesk.Viewing.Document.load('urn:' + this.urn, (async (doc) => {await this.onLoadSuccess(doc); this.isolateBySelection(cat)}).bind(this), this.onLoadFailure);\r\n            });\r\n    }\r\n    //fetched needed js and css code for the viewer to run\r\n    private async getForgeviewerStyleAndSrc() : Promise<void>{\r\n        console.log(\"getting style\");\r\n        return new Promise<void>((resolve, reject) =>{\r\n            let forgeViewerStyle = \"https://developer.api.autodesk.com/modelderivative/v2/viewers/style.min.css\" \r\n            let forgeViewerSrc = \"https://developer.api.autodesk.com/modelderivative/v2/viewers/viewer3D.js\"\r\n            //might be needed to run the viewer on chrome, currently doesn't work\r\n            //let securityIssue = document.createElement('meta');\r\n            let forgeViewerjs = document.createElement(\"script\");\r\n            let forgeViewercss = document.createElement(\"link\");\r\n            let forgeViewerDiv = document.createElement(\"div\");\r\n            \r\n            //securityIssue.httpEquiv = \"Content-Security-Policy\";\r\n            //securityIssue.content = \"script-src 'self' data: gap:  https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/viewer3D.min.js 'unsafe-eval' 'unsafe-inline'; object-src 'self'; style-src 'self' data: gap: https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/style.min.css  'unsafe-inline'; media-src *\";\r\n            forgeViewerjs.src = forgeViewerSrc;\r\n            forgeViewercss.href = forgeViewerStyle; \r\n            forgeViewercss.rel = 'stylesheet'; \r\n            forgeViewercss.type = 'text/css';\r\n            forgeViewerDiv.id = viewId;\r\n            //the code must be loaded in order for the next operations to work correctly, therefore the code is run only after the loading is finished\r\n            forgeViewerjs.onload = () =>{\r\n                console.log(\"script loaded\");\r\n                let panelext = PanelExtension();\r\n                //registers the user defined extensions\r\n                Autodesk.Viewing.theExtensionManager.registerExtension(\"panel_extension\", panelext);\r\n                Autodesk.Viewing.theExtensionManager.registerExtension('selection_manager_extension', selectionManagerExtension())\r\n                //appends css and the div of the viewer to target div\r\n                this.target.appendChild(forgeViewercss);\r\n                this.target.appendChild(forgeViewerDiv);\r\n                resolve();\r\n            }\r\n            //document.head.appendChild(securityIssue);\r\n            //appedns js to the target div\r\n            this.target.appendChild(forgeViewerjs);\r\n           \r\n        }) \r\n    }\r\n\r\n    //function callsed when the document is loaded correctly\r\n    private async onLoadSuccess(doc :Autodesk.Viewing.Document){\r\n        console.log(\"SUCCESS\");\r\n        //loads the document on the viewer, visualising it\r\n        await this.forgeviewer.loadDocumentNode(doc, doc.getRoot().getDefaultGeometry())\r\n    }\r\n    //generic function used in case of error\r\n    private onLoadFailure(errorCode){\r\n        console.log(\"load error: \" + errorCode);\r\n    }\r\n    //used in case a command must be run on an extension\r\n    private async myloadExtension(name : string, succcallback : Function){\r\n        this.forgeviewer.loadExtension(name).then((res) => {succcallback(res)});\r\n    } \r\n\r\n    /**\r\n    * pass the options.categories used in the update function\r\n    * the model objects will be isolated/colored accordingly (see class parameters)\r\n    * **/\r\n    private async isolateBySelection(cat : powerbi.DataViewCategorical){\r\n        //colora di default, in caso aggiungeremo funzione per resettare\r\n        console.log(\"PCOnsanjsbnfdsofib\");\r\n        let curModello : string[];\r\n        let curValues : string[];\r\n        /*if(!this.connector_extension){\r\n            await this.mygetExtension();\r\n        }\r\n        let arr : string[][] = this.connector_extension.getData();\r\n        for(let i = 0; i < arr.length; i ++){\r\n            switch(i){\r\n                case 0 :{\r\n                    if(arr[i][0] != \"\"){\r\n                        this.id_column = arr[i][0].trim(); \r\n                    }\r\n                    break;\r\n                }\r\n                case 1 :{\r\n                    if(arr[i][0] != \"\"){\r\n                        this.id_property = arr[i][0].trim();\r\n                    }\r\n                    break;\r\n                }\r\n                case 2 :{\r\n                    if(arr[i][0] != \"\"){\r\n                        this.value_column = arr[i][0].trim()\r\n                    }\r\n                    break;\r\n                }\r\n                case 3 :{\r\n                    if(arr[i][0] != \"\"){\r\n                        this.color_values = [];\r\n                        this.colorStrings = [];\r\n                        for(let str of arr[i]){\r\n                            let couple = str.split(',');\r\n                            if(couple.length != 2){\r\n                                throw new Error('couples must be two comma separated strings');\r\n                            }\r\n                            this.colorStrings.push(couple[0].trim());\r\n                            this.color_values.push(couple[1].trim());\r\n                        }    \r\n                    } \r\n                    break;\r\n                }\r\n            }\r\n        }*/\r\n        //retrieves the columns of the value to determine the color and the identifier of the color\r\n        for(let obj of cat.categories){\r\n            if(obj.source.displayName === this.id_column){\r\n                if(this.selection_extension){\r\n                    this.selection_extension.setSelectables(obj);\r\n                }\r\n                curModello = obj.values.map((e) => {return e.toString()});\r\n                console.log(\"ids found: \", curModello);\r\n            }\r\n            else if(obj.source.displayName === value_column){\r\n                curValues = obj.values.map((e) => {return e.toString()});\r\n                console.log(\"values found: \", curValues);\r\n            }\r\n        }\r\n        //creates data structures used by isolator\r\n        let stru : struct[] = [];\r\n        if(curValues != undefined){\r\n            for(let val of curValues){\r\n                let curcolor = this.value_to_color.has(val)? this.colorDict.get(this.value_to_color.get(val)) : [0, 0, 0, 0];\r\n                stru.push(new struct([this.id_column], curcolor));\r\n            }\r\n        }\r\n        //the isolator highlights the given models (determined by the id), according to the set options\r\n        this.isolator.searchAndIsolate(stru, curModello, this.isolate, this.zoom, this.color, this.hidden)\r\n    }\r\n\r\n    //updates the parameters using the passed columns\r\n    private updateParameters(cat : powerbi.DataViewCategorical){\r\n        console.log(\"updating parameters\");\r\n        let RGBI : number[][] = [[], [], [], []];\r\n        let color_reference : string[] = [];\r\n        let value_reference : string[] = [];\r\n        let value_color : string[] = [];\r\n        //updates credentials\r\n        this.urn = cat.values[0].values[0] instanceof String || typeof cat.values[0].values[0] === 'string'  ? <string>cat.values[0].values[0] : undefined; \r\n        this.client_id = cat.values[1].values[0] instanceof String || typeof cat.values[1].values[0] === 'string'  ? <string>cat.values[1].values[0] : undefined;\r\n        this.client_secret = cat.values[2].values[0] instanceof String || typeof cat.values[2].values[0] === 'string'  ? <string>cat.values[2].values[0] : undefined\r\n        //updates the name of the column identifying the id\r\n        this.id_column = cat.values[4].values[0] instanceof String || typeof cat.values[4].values[0] === 'string'  ? <string>cat.values[4].values[0] : undefined\r\n        //column determining if the highlighted elements are hidden completely or not\r\n        this.hidden = cat.values[5].values[0] != undefined ? cat.values[5].values[0].toString() === '1' : false;\r\n        console.log(\"updated credentials\")\r\n\r\n        //update actions\r\n        let sett = Number(cat.values[3].values[0].toString());\r\n        if(sett != -1){\r\n            this.zoom = sett % 2 === 1;\r\n            this.isolate = (sett >> 1) % 2 === 1;\r\n            this.color = (sett >> 2) % 2 === 1;\r\n        }\r\n\r\n        for(let val of cat.categories){\r\n            let displayName = val.source.displayName;\r\n            //Red column\r\n            if(displayName === R){\r\n               RGBI[0] = val.values.map((e) => {return Number(e.toString())});\r\n            }\r\n            //green column\r\n            if(displayName === G){\r\n               RGBI[1] = val.values.map((e) => {return Number(e.toString())}); \r\n            }\r\n            //blue column\r\n            if(displayName === B){\r\n               RGBI[2] = val.values.map((e) => {return Number(e.toString())}); \r\n            }\r\n            //intensity column\r\n            if(displayName === I){\r\n               RGBI[3] = val.values.map((e) => {return Number(e.toString())}); \r\n            }\r\n            //color column\r\n            if(displayName === color_ref){\r\n                color_reference = val.values.map((e) => {return e.toString()});\r\n            }\r\n            //value column associated to the color\r\n            if(displayName === value_ref){\r\n                value_reference = val.values.map((e) => {return e.toString()});\r\n            }\r\n            //color associated to the value\r\n            if(displayName === color_value){\r\n                value_color = val.values.map((e) => {return e.toString()});\r\n            }\r\n\r\n            \r\n        }\r\n        //checking if all the columns are given\r\n        let length = color_reference.length\r\n        let samelength = true;\r\n        for(let tmp of RGBI){\r\n            samelength = length === tmp.length;\r\n        }\r\n        if(samelength){\r\n            //inserting the colors in a map\r\n            for(let i = 0; i < length; i ++){\r\n                this.colorDict.set(color_reference[i], [RGBI[0][i], RGBI[1][i], RGBI[2][i], RGBI[3][i]])\r\n            }\r\n            console.log(this.colorDict);\r\n        }\r\n        //if both the color and the value are given\r\n        if(value_color.length === value_reference.length){\r\n            //inserts the associations value-color in a map\r\n            for(let i = 0; i < value_color.length; i ++){\r\n                this.value_to_color.set(value_reference[i], value_color[i])\r\n            }\r\n            console.log(this.value_to_color);\r\n        }\r\n    }\r\n\r\n    private async myGetExtension(){\r\n        if(this.forgeviewer){\r\n            this.forgeviewer.getExtension('selection_manager_extension', ((ext) => {this.selection_extension = ext}));\r\n        }\r\n    }\r\n\r\n}\r\n","module.exports = Function('return this')();","const E_TIMEOUT = new Error('timeout while waiting for mutex to become available');\nconst E_ALREADY_LOCKED = new Error('mutex already locked');\nconst E_CANCELED = new Error('request for lock canceled');\n\nvar __awaiter$2 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Semaphore {\n    constructor(_value, _cancelError = E_CANCELED) {\n        this._value = _value;\n        this._cancelError = _cancelError;\n        this._weightedQueues = [];\n        this._weightedWaiters = [];\n    }\n    acquire(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        return new Promise((resolve, reject) => {\n            if (!this._weightedQueues[weight - 1])\n                this._weightedQueues[weight - 1] = [];\n            this._weightedQueues[weight - 1].push({ resolve, reject });\n            this._dispatch();\n        });\n    }\n    runExclusive(callback, weight = 1) {\n        return __awaiter$2(this, void 0, void 0, function* () {\n            const [value, release] = yield this.acquire(weight);\n            try {\n                return yield callback(value);\n            }\n            finally {\n                release();\n            }\n        });\n    }\n    waitForUnlock(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        return new Promise((resolve) => {\n            if (!this._weightedWaiters[weight - 1])\n                this._weightedWaiters[weight - 1] = [];\n            this._weightedWaiters[weight - 1].push(resolve);\n            this._dispatch();\n        });\n    }\n    isLocked() {\n        return this._value <= 0;\n    }\n    getValue() {\n        return this._value;\n    }\n    setValue(value) {\n        this._value = value;\n        this._dispatch();\n    }\n    release(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        this._value += weight;\n        this._dispatch();\n    }\n    cancel() {\n        this._weightedQueues.forEach((queue) => queue.forEach((entry) => entry.reject(this._cancelError)));\n        this._weightedQueues = [];\n    }\n    _dispatch() {\n        var _a;\n        for (let weight = this._value; weight > 0; weight--) {\n            const queueEntry = (_a = this._weightedQueues[weight - 1]) === null || _a === void 0 ? void 0 : _a.shift();\n            if (!queueEntry)\n                continue;\n            const previousValue = this._value;\n            const previousWeight = weight;\n            this._value -= weight;\n            weight = this._value + 1;\n            queueEntry.resolve([previousValue, this._newReleaser(previousWeight)]);\n        }\n        this._drainUnlockWaiters();\n    }\n    _newReleaser(weight) {\n        let called = false;\n        return () => {\n            if (called)\n                return;\n            called = true;\n            this.release(weight);\n        };\n    }\n    _drainUnlockWaiters() {\n        for (let weight = this._value; weight > 0; weight--) {\n            if (!this._weightedWaiters[weight - 1])\n                continue;\n            this._weightedWaiters[weight - 1].forEach((waiter) => waiter());\n            this._weightedWaiters[weight - 1] = [];\n        }\n    }\n}\n\nvar __awaiter$1 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Mutex {\n    constructor(cancelError) {\n        this._semaphore = new Semaphore(1, cancelError);\n    }\n    acquire() {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            const [, releaser] = yield this._semaphore.acquire();\n            return releaser;\n        });\n    }\n    runExclusive(callback) {\n        return this._semaphore.runExclusive(() => callback());\n    }\n    isLocked() {\n        return this._semaphore.isLocked();\n    }\n    waitForUnlock() {\n        return this._semaphore.waitForUnlock();\n    }\n    release() {\n        if (this._semaphore.isLocked())\n            this._semaphore.release();\n    }\n    cancel() {\n        return this._semaphore.cancel();\n    }\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction withTimeout(sync, timeout, timeoutError = E_TIMEOUT) {\n    return {\n        acquire: (weight) => {\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                let isTimeout = false;\n                const handle = setTimeout(() => {\n                    isTimeout = true;\n                    reject(timeoutError);\n                }, timeout);\n                try {\n                    const ticket = yield sync.acquire(weight);\n                    if (isTimeout) {\n                        const release = Array.isArray(ticket) ? ticket[1] : ticket;\n                        release();\n                    }\n                    else {\n                        clearTimeout(handle);\n                        resolve(ticket);\n                    }\n                }\n                catch (e) {\n                    if (!isTimeout) {\n                        clearTimeout(handle);\n                        reject(e);\n                    }\n                }\n            }));\n        },\n        runExclusive(callback, weight) {\n            return __awaiter(this, void 0, void 0, function* () {\n                let release = () => undefined;\n                try {\n                    const ticket = yield this.acquire(weight);\n                    if (Array.isArray(ticket)) {\n                        release = ticket[1];\n                        return yield callback(ticket[0]);\n                    }\n                    else {\n                        release = ticket;\n                        return yield callback();\n                    }\n                }\n                finally {\n                    release();\n                }\n            });\n        },\n        release(weight) {\n            sync.release(weight);\n        },\n        cancel() {\n            return sync.cancel();\n        },\n        waitForUnlock: (weight) => {\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => {\n                sync.waitForUnlock(weight).then(resolve);\n                setTimeout(() => reject(timeoutError), timeout);\n            });\n        },\n        isLocked: () => sync.isLocked(),\n        getValue: () => sync.getValue(),\n        setValue: (value) => sync.setValue(value),\n    };\n}\n\n// eslint-disable-next-lisne @typescript-eslint/explicit-module-boundary-types\nfunction tryAcquire(sync, alreadyAcquiredError = E_ALREADY_LOCKED) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return withTimeout(sync, 0, alreadyAcquiredError);\n}\n\nexport { E_ALREADY_LOCKED, E_CANCELED, E_TIMEOUT, Mutex, Semaphore, tryAcquire, withTimeout };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Visual } from \"../../src/visual\";\nimport powerbiVisualsApi from \"powerbi-visuals-api\";\nimport IVisualPlugin = powerbiVisualsApi.visuals.plugins.IVisualPlugin;\nimport VisualConstructorOptions = powerbiVisualsApi.extensibility.visual.VisualConstructorOptions;\nimport DialogConstructorOptions = powerbiVisualsApi.extensibility.visual.DialogConstructorOptions;\nvar powerbiKey: any = \"powerbi\";\nvar powerbi: any = window[powerbiKey];\nvar pbiviewertestB15982BC11F74E40B7A6B4503F50947D_DEBUG: IVisualPlugin = {\n    name: 'pbiviewertestB15982BC11F74E40B7A6B4503F50947D_DEBUG',\n    displayName: 'pbi_viewer_test',\n    class: 'Visual',\n    apiVersion: '5.1.0',\n    create: (options: VisualConstructorOptions) => {\n        if (Visual) {\n            return new Visual(options);\n        }\n        throw 'Visual instance not found';\n    },\n    createModalDialog: (dialogId: string, options: DialogConstructorOptions, initialState: object) => {\n        const dialogRegistry = globalThis.dialogRegistry;\n        if (dialogId in dialogRegistry) {\n            new dialogRegistry[dialogId](options, initialState);\n        }\n    },\n    custom: true\n};\nif (typeof powerbi !== \"undefined\") {\n    powerbi.visuals = powerbi.visuals || {};\n    powerbi.visuals.plugins = powerbi.visuals.plugins || {};\n    powerbi.visuals.plugins[\"pbiviewertestB15982BC11F74E40B7A6B4503F50947D_DEBUG\"] = pbiviewertestB15982BC11F74E40B7A6B4503F50947D_DEBUG;\n}\nexport default pbiviewertestB15982BC11F74E40B7A6B4503F50947D_DEBUG;"],"names":[],"sourceRoot":""}